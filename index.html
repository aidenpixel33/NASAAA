<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Spanish Practice ‚Äî Flashcards, Quiz & Fill-in-the-Blank</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Nocken&display=swap');

  :root{
    --bg:#b8dbff;
    --card:#ffffffcc;
    --accent:#4A90E2;
    --muted:#555;
    --radius:25px;
    font-family: 'Nocken', sans-serif;
  }

  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#b8dbff 0%, #d6ecff 60%);color:#061018;position:relative;overflow-x:hidden;}

  .container{max-width:1100px;margin:28px auto;padding:24px;position:relative;z-index:1;}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:18px}
  header h1{font-size:30px;margin:0}
  header .subtitle{color:var(--muted);font-size:20px}
  .app{display:grid;grid-template-columns:260px 1fr;gap:20px}
  nav{background:var(--card);padding:16px;border-radius:var(--radius);min-height:420px;display:flex;flex-direction:column;gap:10px}
  nav button{padding:12px; font-size:18px; border-radius:50px; border:0; cursor:pointer; background:#ffffff; color:var(--accent); transition:0.3s;}
  nav button.active, nav button:hover{background:var(--accent); color:white;}
  main{background:var(--card);padding:20px;border-radius:var(--radius);min-height:420px}
  .panel{display:none}
  .panel.active{display:block}
  .card{background:var(--card);padding:20px;border-radius:var(--radius);box-shadow:0 6px 20px rgba(2,6,23,0.1); text-align:center}
  input[type=text], textarea, select{background:#ffffffcc;border:1px solid rgba(0,0,0,0.1);color:inherit;padding:10px;border-radius:12px;width:100%; font-size:18px;}
  .big{font-size:40px;font-weight:600;margin-bottom:20px;}
  .muted{color:var(--muted);font-size:16px}
  .btn{padding:12px 20px;border-radius:50px;border:0;cursor:pointer;font-size:18px;margin:5px;}
  .btn.primary{background:var(--accent);color:white;}
  .btn.ghost{background:transparent;border:1px solid var(--accent);color:var(--accent);}
  .choices{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:12px}
  .choice{padding:12px;border-radius:50px;border:1px solid rgba(0,0,0,0.05);cursor:pointer;background:rgba(255,255,255,0.5); transition:0.3s;}
  .choice.correct{border-color:rgba(63,224,155,0.9);background:rgba(63,224,155,0.1);color:#061018}
  .choice.wrong{border-color:rgba(255,113,113,0.95);background:rgba(255,113,113,0.1);color:#061018}
  #fill-wordbank button{margin:3px;}
</style>
</head>
<body>
<div class="container">
  <header>
    <div>
      <h1>Spanish Practice</h1>
      <div class="subtitle">Flashcards | Quiz | Fill-in-the-Blank</div>
    </div>
    <div class="muted">Open-source & offline</div>
  </header>

  <div class="app">
    <nav>
      <button class="active" data-panel="flash">Flashcards</button>
      <button data-panel="quiz">Quiz (Multiple Choice)</button>
      <button data-panel="manage">Add / Manage Words</button>
      <button data-panel="fill">Fill-in-the-Blank</button>
      <hr>
      <button id="btn-import" class="btn ghost">Import Words</button>
      <button id="btn-export" class="btn ghost">Export Words</button>
    </nav>

    <main>
      <!-- FLASHCARDS -->
      <section id="flash" class="panel active">
        <div class="card">
          <div id="card-word" class="big">‚Äî</div>
          <div style="display:flex; justify-content:center; gap:12px;">
            <button id="flip" class="btn ghost">Flip</button>
            <button id="next-card" class="btn primary">Next</button>
          </div>
        </div>
      </section>

      <!-- QUIZ -->
      <section id="quiz" class="panel">
        <div class="card">
          <div id="q-word" class="big">‚Äî</div>
          <div class="choices" id="q-choices"></div>
        </div>
      </section>

      <!-- MANAGE WORDS -->
      <section id="manage" class="panel">
        <div class="card">
          <input id="new-es" type="text" placeholder="Spanish" />
          <input id="new-en" type="text" placeholder="English" />
          <button id="add-word" class="btn primary">Add</button>
          <textarea id="quick-import" rows="5" placeholder="Paste words: hola, hello"></textarea>
          <button id="apply-quick" class="btn primary">Import Multiple</button>
          <div id="words-list" style="margin-top:12px;"></div>
        </div>
      </section>

      <!-- FILL-IN-THE-BLANK -->
      <section id="fill" class="panel">
        <div class="card">
          <div id="fill-sentence" class="big">‚Äî</div>
          <input type="text" id="fill-answer" placeholder="Type your answer here"/>
          <div id="fill-wordbank"></div>
          <button id="fill-check" class="btn primary">Check</button>
          <div id="fill-feedback" class="muted"></div>
        </div>
      </section>

    </main>
  </div>
</div>

<script>
let state = {words:[], sessions:0};
const STORAGE_KEY = 'spanish_practice_v3';
function saveState(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); renderWords(); renderFlash(); renderQuiz(); renderFill(); }
function loadState(){ const raw=localStorage.getItem(STORAGE_KEY); if(raw) try{ state=JSON.parse(raw); }catch(e){ state={words:[],sessions:0}; } }
loadState();

/* NAV */
document.querySelectorAll('nav button[data-panel]').forEach(b=>{
  b.addEventListener('click', ()=>{
    document.querySelectorAll('nav button[data-panel]').forEach(x=>x.classList.remove('active'));
    b.classList.add('active');
    document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
    document.getElementById(b.dataset.panel).classList.add('active');
  });
});

/* FLASHCARDS */
let flashIndex=0; let showingFront=true;
function renderFlash(){
  if(!state.words.length){ document.getElementById('card-word').innerText='‚Äî'; return; }
  const w = state.words[flashIndex % state.words.length];
  document.getElementById('card-word').innerText = showingFront ? w.es : w.en;
}
document.getElementById('flip').addEventListener('click', ()=>{ showingFront = !showingFront; renderFlash(); });
document.getElementById('next-card').addEventListener('click', ()=>{ flashIndex++; showingFront=true; renderFlash(); });

/* QUIZ */
let quizIndex=0;
function renderQuiz(){
  if(!state.words.length) return;
  const w = state.words[quizIndex % state.words.length];
  document.getElementById('q-word').innerText = w.es;
  const choicesDiv = document.getElementById('q-choices');
  choicesDiv.innerHTML='';
  let options = [w.en];
  while(options.length<4 && state.words.length>1){
    const r = state.words[Math.floor(Math.random()*state.words.length)].en;
    if(!options.includes(r)) options.push(r);
  }
  options.sort(()=>Math.random()-0.5);
  options.forEach(opt=>{
    const btn = document.createElement('button');
    btn.className='choice btn ghost';
    btn.innerText = opt;
    btn.onclick=()=>{
      if(opt===w.en){ btn.classList.add('correct'); quizIndex++; setTimeout(renderQuiz,500);}
      else btn.classList.add('wrong');
    };
    choicesDiv.appendChild(btn);
  });
}

/* MANAGE WORDS */
function renderWords(){ 
  const list=document.getElementById('words-list'); list.innerHTML=''; 
  state.words.forEach(w=>{ const div=document.createElement('div'); div.innerText=w.es+' ‚Üí '+w.en; list.appendChild(div); }); 
}
document.getElementById('add-word').addEventListener('click', ()=>{
  const es=document.getElementById('new-es').value.trim(), en=document.getElementById('new-en').value.trim(); 
  if(!es||!en)return;
  state.words.push({es,en}); saveState(); document.getElementById('new-es').value=''; document.getElementById('new-en').value='';
});
document.getElementById('apply-quick').addEventListener('click', ()=>{
  const lines=document.getElementById('quick-import').value.split('\n'); 
  lines.forEach(l=>{ const p=l.split(','); if(p.length>=2) state.words.push({es:p[0].trim(), en:p[1].trim()}); }); 
  saveState(); document.getElementById('quick-import').value='';
});

/* Import/Export */
document.getElementById('btn-export').addEventListener('click', ()=>{
  const blob=new Blob([JSON.stringify(state.words,null,2)],{type:'application/json'}); 
  const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='words.json'; a.click();
});
document.getElementById('btn-import').addEventListener('click', ()=>{
  const file=document.createElement('input'); file.type='file'; file.accept='application/json'; 
  file.onchange=e=>{
    const f=e.target.files[0]; if(!f)return;
    const reader=new FileReader(); reader.onload=ev=>{
      try{ const arr=JSON.parse(ev.target.result); if(Array.isArray(arr)){ arr.forEach(w=>{ if(w.es && w.en) state.words.push(w); }); saveState(); } 
      }catch(err){ alert('Invalid JSON'); }
    };
    reader.readAsText(f);
  }; file.click();
});

/* FILL-IN-THE-BLANK */
let fillIndex=0;
function renderFill(){
  if(!state.words.length) return;
  const w = state.words[fillIndex % state.words.length];
  const sentenceMap={
    "hola":"Cuando entro a la clase, siempre digo _____ a mis compa√±eros.",
    "comer":"Me gusta _____ frutas y verduras todos los d√≠as.",
    "perro":"El _____ de mi vecino es muy amistoso y juguet√≥n.",
    "escuela":"Cada ma√±ana, los ni√±os van a la _____ con entusiasmo.",
    "libro":"Estoy leyendo un _____ interesante sobre historia antigua."
  };
  document.getElementById('fill-sentence').innerText = sentenceMap[w.es] || `Llena el espacio en blanco con la palabra correcta: _____`;
  document.getElementById('fill-answer').value='';
  document.getElementById('fill-feedback').innerText='';
  const bank = document.getElementById('fill-wordbank'); bank.innerHTML='';
  let options=[w.es];
  while(options.length<4 && state.words.length>1){
    const r = state.words[Math.floor(Math.random()*state.words.length)].es;
    if(!options.includes(r)) options.push(r);
  }
  options.sort(()=>Math.random()-0.5);
  options.forEach(opt=>{
    const b=document.createElement('button'); b.className='btn ghost'; b.innerText=opt;
    b.onclick=()=>document.getElementById('fill-answer').value=opt;
    bank.appendChild(b);
  });
}
document.getElementById('fill-check').addEventListener('click', ()=>{
  const w = state.words[fillIndex % state.words.length];
  const ans=document.getElementById('fill-answer').value.trim().toLowerCase();
  if(ans===w.es.toLowerCase()){
    document.getElementById('fill-feedback').innerText='¬°Correcto! üéâ';
    fillIndex++;
    setTimeout(renderFill,500);
  } else document.getElementById('fill-feedback').innerText='Incorrecto. Intenta de nuevo.';
});

renderWords(); renderFlash(); renderQuiz(); renderFill();

/* Keyboard shortcuts */
document.addEventListener('keydown', e=>{
  if(e.key==='Enter'){ 
    if(document.getElementById('flash').classList.contains('active')) document.getElementById('flip').click();
    if(document.getElementById('fill').classList.contains('active')) document.getElementById('fill-check').click();
  }
  if(e.key==='Shift'){
    if(document.getElementById('flash').classList.contains('active')) document.getElementById('next-card').click();
  }
});
</script>
</body>
</html>
