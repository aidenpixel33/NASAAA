<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Spanish Practice â€” Flashcards & Quizzes</title>
<style>
  :root{
    --bg:#b8dbff;
    --card:#ffffffcc;
    --accent:#3f84ff;
    --muted:#555;
    --radius:14px;
    font-family: 'Nocken', sans-serif;
  }

  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#b8dbff 0%, #d6ecff 60%);color:#061018;position:relative;overflow-x:hidden;}
  
  /* Container and app styling */
  .container{max-width:1100px;margin:28px auto;padding:24px;position:relative;z-index:1;}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:18px}
  header h1{font-size:30px;margin:0}
  header .subtitle{color:var(--muted);font-size:20px}
  .app{display:grid;grid-template-columns:260px 1fr;gap:20px}
  nav{background:var(--card);padding:16px;border-radius:12px;min-height:420px}
  nav button{display:block;width:100%;padding:12px 14px;margin-bottom:10px;border:0;background:var(--accent);color:#fff;text-align:center;border-radius:25px;font-size:18px;cursor:pointer;transition:0.3s;}
  nav button.active{background:#1f5cc3;font-weight:600}
  main{background:var(--card);padding:20px;border-radius:14px;min-height:420px}
  .panel{display:none}
  .panel.active{display:block}
  .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 6px 20px rgba(2,6,23,0.1)}
  input[type=text], textarea{background:#ffffffcc;border:1px solid rgba(0,0,0,0.1);color:inherit;padding:10px;border-radius:8px;width:100%;font-size:16px}
  .big{font-size:28px;font-weight:600;text-align:center}
  .muted{color:var(--muted);font-size:14px;text-align:center}
  .btn{padding:10px 14px;border-radius:12px;border:0;cursor:pointer;margin:4px;font-size:16px;transition:0.2s;}
  .btn.primary{background:var(--accent);color:#fff}
  .btn.ghost{background:#fff;border:1px solid var(--accent);color:var(--accent)}
  .center{display:flex;align-items:center;justify-content:center}
  .choices{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:12px}
  .choice{padding:12px;border-radius:10px;border:1px solid rgba(0,0,0,0.05);cursor:pointer;background:rgba(255,255,255,0.5);text-align:center;transition:0.2s;}
  .choice.correct{border-color:rgba(63,224,155,0.9);background:rgba(63,224,155,0.1);}
  .choice.wrong{border-color:rgba(255,113,113,0.95);background:rgba(255,113,113,0.1);}
</style>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <h1>Spanish Practice</h1>
        <div class="subtitle">Flip + Check: Enter, New Words + Next: Shift</div>
      </div>
      <div class="muted">Built for practicing Spanish â€” open-source & offline</div>
    </header>

    <div class="app">
      <!-- NAV -->
      <nav class="card">
        <button class="active" data-panel="flash">Flashcards</button>
        <button data-panel="quiz">Quiz</button>
        <button data-panel="fill">Fill in the Blank</button>
        <button data-panel="manage">Add / Manage Words</button>
        <hr>
        <button id="btn-import" class="btn ghost">Import Words</button>
        <button id="btn-export" class="btn ghost">Export Words</button>
      </nav>

      <!-- MAIN PANELS -->
      <main>
        <!-- FLASHCARDS -->
        <section id="flash" class="panel active">
          <div class="card">
            <div id="card-word" class="big">â€”</div>
            <div style="display:flex;justify-content:center;gap:10px;margin-top:12px">
              <button id="flip" class="btn ghost">Flip</button>
              <button id="next-card" class="btn primary">Next</button>
            </div>
          </div>
        </section>

        <!-- QUIZ -->
        <section id="quiz" class="panel">
          <div class="card">
            <div class="muted">Seleccione la traducciÃ³n correcta</div>
            <div class="choices" id="q-choices"></div>
          </div>
        </section>

        <!-- FILL IN THE BLANK -->
        <section id="fill" class="panel">
          <div class="card">
            <div id="fill-sentence" class="big">â€”</div>
            <div class="center" id="word-bank" style="margin-top:10px;"></div>
            <input type="text" id="fill-answer" placeholder="Escribe la palabra aquÃ­" style="margin-top:12px" />
            <button id="fill-check" class="btn primary">Comprobar</button>
            <div id="fill-feedback" class="muted" style="margin-top:6px"></div>
          </div>
        </section>

        <!-- MANAGE WORDS -->
        <section id="manage" class="panel">
          <div class="card">
            <input id="new-es" type="text" placeholder="Spanish" />
            <input id="new-en" type="text" placeholder="English" />
            <button id="add-word" class="btn primary">Add</button>
            <textarea id="quick-import" rows="5" placeholder="Paste words: hola, hello"></textarea>
            <button id="apply-quick" class="btn primary">Import Multiple</button>
            <div id="words-list" style="margin-top:12px;"></div>
          </div>
        </section>
      </main>
    </div>
  </div>

<script>
/* Spanish Practice JS */
let state = {words:[], sessions:0};
const STORAGE_KEY = 'spanish_practice_v2';
function saveState(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); renderWords(); }
function loadState(){ const raw=localStorage.getItem(STORAGE_KEY); if(raw) try{ state=JSON.parse(raw); }catch(e){ state={words:[],sessions:0}; } }
loadState();

/* NAV */
document.querySelectorAll('nav button[data-panel]').forEach(b=>{
  b.addEventListener('click', ()=>{
    document.querySelectorAll('nav button[data-panel]').forEach(x=>x.classList.remove('active'));
    b.classList.add('active');
    document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
    document.getElementById(b.dataset.panel).classList.add('active');

    if(b.dataset.panel==='quiz') renderQuiz();
    if(b.dataset.panel==='fill') renderFill();
  });
});

/* FLASHCARDS */
let flashIndex = 0;
function renderFlash(){
  if(!state.words.length){ document.getElementById('card-word').innerText='â€”'; return; }
  const w = state.words[flashIndex % state.words.length];
  document.getElementById('card-word').innerText=w.es;
}
document.getElementById('flip').addEventListener('click', ()=>{
  const w = state.words[flashIndex % state.words.length];
  const el = document.getElementById('card-word');
  if(el.innerText === w.es) el.innerText = w.en;
  else el.innerText = w.es;
});
document.getElementById('next-card').addEventListener('click', ()=>{ flashIndex++; renderFlash(); });

/* QUIZ */
function renderQuiz(){
  if(!state.words.length) return;
  const w = state.words[Math.floor(Math.random()*state.words.length)];
  const choices = [w.en];
  while(choices.length<4){
    const r = state.words[Math.floor(Math.random()*state.words.length)].en;
    if(!choices.includes(r)) choices.push(r);
  }
  choices.sort(()=>Math.random()-0.5);
  const container = document.getElementById('q-choices');
  container.innerHTML = '';
  choices.forEach(c=>{
    const btn = document.createElement('div');
    btn.className='choice';
    btn.innerText = c;
    btn.onclick = ()=>{
      btn.classList.add(c===w.en?'correct':'wrong');
      setTimeout(renderQuiz,500);
    }
    container.appendChild(btn);
  });
}

/* FILL IN THE BLANK */
let fillIndex = 0;
function renderFill(){
  if(!state.words.length) return;
  const w = state.words[fillIndex % state.words.length];
  const sentenceTemplates = [
    `Yo tengo _____ en mi mochila.`,
    `Ella compra _____ todos los dÃ­as.`,
    `Nosotros vemos _____ en la televisiÃ³n.`,
    `Ellos quieren _____ ahora.`
  ];
  const sentence = sentenceTemplates[Math.floor(Math.random()*sentenceTemplates.length)];
  document.getElementById('fill-sentence').innerText = sentence;
  document.getElementById('fill-answer').value = '';
  document.getElementById('fill-feedback').innerText = '';

  // Word bank
  const bank = document.getElementById('word-bank');
  bank.innerHTML = '';
  let options = [w.es];
  while(options.length<4){
    const r = state.words[Math.floor(Math.random()*state.words.length)].es;
    if(!options.includes(r)) options.push(r);
  }
  options.sort(()=>Math.random()-0.5);
  options.forEach(opt=>{
    const b = document.createElement('button');
    b.className='btn ghost';
    b.innerText = opt;
    b.style.margin='3px';
    b.onclick=()=>document.getElementById('fill-answer').value = opt;
    bank.appendChild(b);
  });
}
document.getElementById('fill-check').addEventListener('click', ()=>{
  const w = state.words[fillIndex % state.words.length];
  const ans = document.getElementById('fill-answer').value.trim().toLowerCase();
  if(ans === w.es.toLowerCase()){
    document.getElementById('fill-feedback').innerText='Â¡Correcto! ðŸŽ‰';
    fillIndex++;
    setTimeout(renderFill,500);
  } else {
    document.getElementById('fill-feedback').innerText='Incorrecto. Intenta de nuevo.';
  }
});

/* MANAGE WORDS */
function renderWords(){
  const list = document.getElementById('words-list');
  list.innerHTML='';
  state.words.forEach(w=>{ const div=document.createElement('div'); div.innerText=w.es+' â†’ '+w.en; list.appendChild(div); });
  renderFlash();
}
document.getElementById('add-word').addEventListener('click', ()=>{
  const es=document.getElementById('new-es').value.trim(), en=document.getElementById('new-en').value.trim(); 
  if(!es||!en) return;
  state.words.push({es,en}); saveState(); 
  document.getElementById('new-es').value=''; document.getElementById('new-en').value='';
});
document.getElementById('apply-quick').addEventListener('click', ()=>{
  const lines=document.getElementById('quick-import').value.split('\n'); 
  lines.forEach(l=>{
    const p=l.split(','); if(p.length>=2) state.words.push({es:p[0].trim(), en:p[1].trim()});
  }); 
  saveState(); document.getElementById('quick-import').value='';
});

/* Import/Export */
document.getElementById('btn-export').addEventListener('click', ()=>{
  const blob=new Blob([JSON.stringify(state.words,null,2)],{type:'application/json'});
  const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='words.json'; a.click();
});
document.getElementById('btn-import').addEventListener('click', ()=>{
  const file=document.createElement('input'); file.type='file'; file.accept='application/json'; file.onchange=e=>{
    const f=e.target.files[0]; if(!f) return;
    const reader=new FileReader();
    reader.onload=ev=>{
      try{
        const arr=JSON.parse(ev.target.result);
        if(Array.isArray(arr)) arr.forEach(w=>{ if(w.es && w.en) state.words.push(w); });
        saveState();
      } catch{ alert('Invalid JSON'); }
    };
    reader.readAsText(f);
  }; file.click();
});

renderWords();

/* Keyboard shortcuts */
document.addEventListener('keydown', e=>{
  if(e.key==='Enter'){ if(document.getElementById('flash').classList.contains('active')) document.getElementById('flip').click(); }
  if(e.key==='Shift'){ if(document.getElementById('flash').classList.contains('active')) document.getElementById('next-card').click(); }
});
</script>
</body>
</html>
